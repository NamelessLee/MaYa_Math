{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\错题本/assets\\Script\\错题本\\error_abstract.js"],"names":["cc","Class","extends","Component","properties","OPT_HEIGHT","PAGE_NUM","item_prefab","type","Prefab","default","scroll_view","ScrollView","lbGrade","Label","onLoad","exercise","input","answer","content","opt_item_set","choose","errorbook1","errorbook2","errorbook3","start","JSON","parse","sys","localStorage","getItem","bt1_clicked","string","setItem","stringify","init","bt2_clicked","bt3_clicked","bt_error_exercise_clicked","Alert","show","director","loadScene","bt_back_clicked","removeAllChildren","length","i","item","instantiate","addChild","push","node","on","on_scroll_ended","bind","start_y","y","start_index","load_record","label1","label2","label3","label4","label5","getChildByName","color","getComponent","toString","scrollveiw_load_recode","elastic","_autoScrolling","down_loaded","out_len","up_loaded","update","dt"],"mappings":"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","file":"error_abstract.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\错题本","sourcesContent":["/***********************************************************************************************************************************\r\n功能：实现错题本概览功能，使用户浏览错题并可跳转到练习错题的场景\r\n**********************************************************************************************************************************/\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        OPT_HEIGHT: 80, // 每项的高度\r\n        PAGE_NUM: 8, // 每页为8个;\r\n        item_prefab: {\t\t//预制体\r\n            type: cc.Prefab,\r\n            default: null,\r\n        },\r\n\r\n        scroll_view: {\t\t//滚动窗口\r\n            type: cc.ScrollView,\r\n            default: null,\r\n        },\r\n\r\n        lbGrade: {\t\t\t//年级\r\n            type: cc.Label,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    onLoad:function(){\r\n        this.exercise = [];\t\t\t\t\t\t\t\t\t\t\t\t//错题\r\n        this.input = [];\t\t\t\t\t\t\t\t\t\t\t\t//用户之前的输入（错误答案）\r\n        this.answer = [];\t\t\t\t\t\t\t\t\t\t\t\t//正确答案\r\n        this.content = this.scroll_view.content;\t\t\t\t\t\t//答案横坐标\r\n        this.opt_item_set = [];\r\n        this.choose;\r\n\t\tthis.errorbook1 = []\r\n\t\tthis.errorbook2 = []\r\n\t\tthis.errorbook3 = []\r\n    },\r\n\r\n    start:function(){\r\n\t\tthis.choose = 0\r\n\t\tthis.errorbook1 = JSON.parse(cc.sys.localStorage.getItem('errorbook1'));//加载一年级错题本\r\n        this.errorbook2 = JSON.parse(cc.sys.localStorage.getItem('errorbook2'));//加载二年级错题本\r\n        this.errorbook3 = JSON.parse(cc.sys.localStorage.getItem('errorbook3'));//加载三年级错题本\r\n    },\r\n\r\n    bt1_clicked:function(){//用户选择浏览一年级错题\r\n        this.exercise = JSON.parse(cc.sys.localStorage.getItem('errorbook1'));\r\n        this.input = JSON.parse(cc.sys.localStorage.getItem('wronganswer1'));\r\n        this.answer = JSON.parse(cc.sys.localStorage.getItem('erbkanswer1'));\r\n        if(this.exercise==null)\r\n            this.exercise = [];\r\n        this.lbGrade.string = \"一年级\"\r\n        this.choose = 1;\r\n        cc.sys.localStorage.setItem('errorbook_choose', JSON.stringify(this.choose));\r\n        this.init();\r\n    },\r\n\r\n    bt2_clicked:function(){//用户选择浏览二年级错题\r\n        this.exercise = JSON.parse(cc.sys.localStorage.getItem('errorbook2'));\r\n        this.input = JSON.parse(cc.sys.localStorage.getItem('wronganswer2'));\r\n        this.answer = JSON.parse(cc.sys.localStorage.getItem('erbkanswer2'));\r\n        if(this.exercise==null)\r\n           this.exercise = [];\r\n        this.lbGrade.string = \"二年级\"\r\n        this.choose = 2;\r\n        cc.sys.localStorage.setItem('errorbook_choose', JSON.stringify(this.choose));\r\n        this.init();\r\n    },\r\n\r\n    bt3_clicked:function(){//用户选择浏览三年级错题\r\n        this.exercise = JSON.parse(cc.sys.localStorage.getItem('errorbook3'));\r\n        this.input = JSON.parse(cc.sys.localStorage.getItem('wronganswer3'));\r\n        this.answer = JSON.parse(cc.sys.localStorage.getItem('erbkanswer3'));\r\n        if(this.exercise==null)\r\n            this.exercise = [];\r\n        this.lbGrade.string = \"三年级\"\r\n        this.choose = 3;\r\n        cc.sys.localStorage.setItem('errorbook_choose', JSON.stringify(this.choose));\r\n        this.init();\r\n    },\r\n\r\n    bt_error_exercise_clicked:function(){//用户选择进行错题练习\r\n\t\tif(this.choose == 0){\r\n\t\t\tAlert.show(\"你还没有选择年级，不能练习哦\", null, false);\r\n\t\t}else if(this.choose == 1 && this.errorbook1 == null){\r\n\t\t\tAlert.show(\"当前没有错题，去做些新题吧\", null, false);\r\n\t\t}else if(this.choose == 2 && this.errorbook2 == null){\r\n\t\t\tAlert.show(\"当前没有错题，去做些新题吧\", null, false);\r\n\t\t}else if(this.choose == 3 && this.errorbook3 == null){\r\n\t\t\tAlert.show(\"当前没有错题，去做些新题吧\", null, false);\r\n\t\t}else{\r\n\t\t\tcc.director.loadScene(\"errorbook\")\r\n\t\t}\r\n    },\r\n\r\n    bt_back_clicked:function(){//回到主界面\r\n        cc.director.loadScene(\"lxymenu\")\r\n    },\r\n\r\n    init:function(){//初始化\r\n        this.content.removeAllChildren();\r\n        this.opt_item_set.length = 0;\r\n        for(var i = 0; i < this.exercise.length; i ++) {\r\n            var item = cc.instantiate(this.item_prefab);\r\n            this.content.addChild(item);\r\n            this.opt_item_set.push(item);\r\n        }\r\n        this.scroll_view.node.on(\"scroll-ended\", this.on_scroll_ended.bind(this), this);\r\n        this.start_y = this.content.y;\r\n        this.start_index = 0;\r\n        this.load_record(this.start_index);\r\n    },\r\n\r\n    load_record: function(start_index) {//加载错题\r\n\t\tvar label1;\r\n\t\tvar label2;\r\n\t\tvar label3;\r\n\t\tvar label4;\r\n\t\tvar label5;\r\n        this.start_index = start_index;\r\n        for(var i = 0; i < this.exercise.length; i ++) {\r\n            label1 = this.opt_item_set[i].getChildByName(\"num\");//题目序号\r\n\t\t\tlabel1.color = new cc.color(105,105,105,0);\r\n\t\t\tlabel2 = this.opt_item_set[i].getChildByName(\"label\");//题目内容\r\n\t\t\tlabel3 = this.opt_item_set[i].getChildByName(\"input\");//用户输入\r\n\t\t\tlabel4 = this.opt_item_set[i].getChildByName(\"answer\");//题目答案\r\n\t\t\tlabel5 = this.opt_item_set[i].getChildByName(\"wrong\");//是否正确\r\n\t\t\tlabel1.getComponent(cc.Label).string = (i+1).toString();\r\n\t\t\tlabel2.getComponent(cc.Label).string = this.exercise[i];\r\n            label4.color = new cc.color(34,139,34,0);\r\n            \r\n\t\t\tif(this.input[i]!=' '){\r\n\t\t\t\tlabel3.getComponent(cc.Label).string = this.input[i];\r\n\t\t\t\tlabel5.getComponent(cc.Label).string = \"——\";\r\n\t\t\t\tlabel4.getComponent(cc.Label).string = this.answer[i];\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tlabel3.getComponent(cc.Label).string = \"未作答\";\r\n\t\t\t\tlabel5.getComponent(cc.Label).string = \"\";\r\n\t\t\t\tlabel4.getComponent(cc.Label).string = this.answer[i];\r\n\t\t\t}\r\n        }\r\n    },\r\n\r\n    on_scroll_ended: function() {//滚动窗口到达底部\r\n        this.scrollveiw_load_recode();\r\n        this.scroll_view.elastic = true;\r\n    },\r\n\r\n    scrollveiw_load_recode: function() {\r\n         // 滚动窗口向下加载\r\n        if (this.start_index + this.PAGE_NUM * 3 < this.exercise.length &&\r\n            this.content.y >= this.start_y + this.PAGE_NUM * 2 * this.OPT_HEIGHT) { // 动态加载\r\n            \r\n            if (this.scroll_view._autoScrolling) { // 等待这个自动滚动结束以后再做加载\r\n                this.scroll_view.elastic = false; // 暂时关闭回弹效果\r\n                return;\r\n            }\r\n\r\n            var down_loaded = this.PAGE_NUM;\r\n            this.start_index += down_loaded;\r\n            if (this.start_index + this.PAGE_NUM * 3 > this.exercise.length) {\r\n                var out_len = this.start_index + this.PAGE_NUM * 3 - this.exercise.length;\r\n                down_loaded -= (out_len);\r\n                this.start_index -= (out_len);\r\n            }\r\n            this.load_record(this.start_index);\r\n\r\n            this.content.y -= (down_loaded * this.OPT_HEIGHT);\r\n            return;\r\n        }\r\n\r\n        // 滚动窗口向上加载\r\n        if (this.start_index > 0 && this.content.y <= this.start_y) {\r\n            if (this.scroll_view._autoScrolling) { // 等待这个自动滚动结束以后再做加载\r\n                this.scroll_view.elastic = false;\r\n                return;\r\n            }\r\n\r\n            var up_loaded = this.PAGE_NUM;\r\n            this.start_index -= up_loaded;\r\n            if (this.start_index < 0) {\r\n                up_loaded += this.start_index;\r\n                this.start_index = 0; \r\n            }\r\n            this.load_record(this.start_index);\r\n            this.content.y += (up_loaded * this.OPT_HEIGHT);\r\n        }\r\n        // end \r\n    },\r\n\t\r\n    update: function (dt) {//更新窗口\r\n        this.scrollveiw_load_recode();\r\n    },\r\n\r\n    \r\n\r\n});"]}